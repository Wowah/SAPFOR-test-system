# Система тестирования для системы SAPFOR

### Требования
Необходимо иметь:
1. python3
1. Библиотеки sqlite3, shutil

### Структура тестов
Тест представляет собой директорию со следующей структурой:
* **src** - директория, содержащая исходные коды последовательной программы, которую
необходимо распараллелить
* **input (optional)** - директория, которая содержит набор входных данных программы.
Каждый отдельный файл в этой директории должен содержать тестовые данные,
которые должны будут подаваться тестовой программе на вход. В случае отсутствия
данной директории тестовая программа будет запущена без всяких входных данных.
* **config.txt** - конфигурационный файл

#### Структура конфигурационного файла
Конфигурационный файл содержит строки в следующем формате:

_KEY=VALUE_

Доступные параметры:
* **SUITENAME** - имя тестового набора, к которому относится данный тест. Имя должно
быть уникальным.
* **TESTNAME** - имя теста. Имя должно быть уникальным.

### Доступные команды в системе тестирования
1. **add-tests** - команда для добавления новых тестов в систему

Пример использования: _"python3 prog.py add-tests -d /var/tests"_

Доступные ключи:
   1. **-d, --dir** — аргумент задает директорию, из которой будут добавлять тесты (структуру каждого теста см. раздел I). По умолчанию используется директория **tests**.

1. **run** - команда для запуска тестов.

Пример использования: _"python3 prog.py run -c new.conf"_

Доступные ключи:
   1. **-s, --suite** — аргумент, в котором передается имя конкретного тестового набора, который нужно запустить. По умолчанию запускаются все доступные в системе тесты.
   1. **-d, --dir** — аргумент для задания целевой директории для тестирования. В ней будут производиться действия по распараллеливанию тестов и их запуску. По умолчанию используется директория **new_testing_$i**, где $i — это порядковый номер тестирования для директории, в которой находится пользователь.
   1. **-c, --config** — аргумент для задания конфигурационного файла для тестирования. По умолчанию используется файл **testing.conf**.
   **Возможные конфигурационные параметры**
   a.) TESTINGNAME — имя тестирования. По умолчанию: NULL. Имя должно быть уникальным.
   b.) SYSINFO — строка, содержащая информацию о системе. По умолчанию берется вывод команды «uname -a».
   c.) SAPVERSION — строка, содержащая текущую версию САПФОР. По умолчанию берется вывод команды «Sapfor_F -ver»

1. **list** - команда для отображения всех запусков тестов. Отображение идет в виде таблицы с началом тестирования, концом и статусом

Пример использования: _"python3 prog.py list"_

1. **continue** - команда для продолжения тестирования, если оно было прервано по каким-то причинам.

Пример использования: _"python3 prog.py continue"_

Доступные ключи:
   1. **-n, --name** — имя тестирования, которое нужно продолжить. По умолчанию возобновляются все незаконченные тестирования.
   1. **-i, --id** — ID тестирования, которое нужно возобновить

1. **server** - запуск REST сервера для показа результатов.

Пример использования: _"python3 prog.py server -p 8080"_

Доступные ключи:
   1. **-p, –port** - порт, на котором будет запущен сервер. По умолчанию: 8081.
